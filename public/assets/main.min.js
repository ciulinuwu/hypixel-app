window.location.hash&&window.location.replace("/");try{$,jQuery}catch(b){var a=document.getElementsByTagName("noscript")[0];a.outerHTML=a.innerHTML;a=document.getElementById("error");a.getElementsByTagName("a")[0].innerText=navigator.userAgent;a.getElementsByTagName("div")[1].removeAttribute("hidden");a.getElementsByTagName("div")[0].setAttribute("hidden","")}
var $inputSettingsApiKey=$("[class='Input.Settings.apiKey']"),$inputLookUpUUID=$("[class='Input.lookUp.UUID']"),$buttonSettingsSApiKey=$("[class^='Button.Settings.s_apiKey']"),$buttonLookUpSubmit=$("[class^='Button.lookUp.submit']"),$buttonSettingsClearCache=$("[class^='Button.Settings.clearCache']"),$gameTypes={},$achievements={},$endpoint="https://api.hypixel.net",$isSetup=!1,$lastLogin=0,$isOnline=!1,$currUUID="",$data={},skinRender;try{getItem("")}catch(b){$alert("Cookies are disabled","Local Storage is required for the app to function correctly.")}
$(document).ready(function(){$("body").removeAttr("style");$("#globalPop").popup();setup_chk();getServerStats();getGameTypes();getAchievements()});function getItem(b){b=localStorage.getItem(b);try{return JSON.parse(b)}catch(d){return b}}$inputSettingsApiKey.val(getItem("apiKey"));function $alert_close(){$("#globalPop").popup("close");$("#globalPop button").unbind("click")}
function $alert(b,d,f,g){d&&=d.replace(/(\r\n|\r|\n)/g,"<br/>");$("#globalPop .title span").text(b);$("#globalPop .text span").html(d);var h=setInterval(function(){$("#globalPop").popup("open");clearInterval(h);1===g&&$("#globalPop button.btn-b").removeAttr("hidden");1!==g&&$("#globalPop button.btn-b").attr("hidden","");$("#globalPop button.btn-a").on("click","function"===typeof f&&f||$alert_close);$("#globalPop button.btn-b").on("click",$alert_close)},1)}function app_run(){getWatchdogStats()}
function setup_run(){$isSetup=!0;localStorage.setItem("cache",JSON.stringify({}));$alert("Welcome!","Please enter API key to continue.",function(){$("#settings a.revert-btn").hide();$(".OTHERSETTINGS").hide();$.mobile.changePage("#settings")})}function setup_chk(){getItem("setup")?app_run():setup_run()}
function setup_suc(){localStorage.setItem("setup","1");$isSetup=!1;$alert("API key has been set!","Enjoy the app!",function(){$.mobile.changePage("#Home");app_run();$("#settings .ui-btn-left").show();$(".OTHERSETTINGS").show()})}function setup_err(b){console.error(b)}function apikey_suc(){if($isSetup)return setup_suc();$alert("Validation Complete","Your API key is valid")}
function getPlayerUUID(){_fetch("GET","https://api.ashcon.app/mojang/v2/user/"+$inputLookUpUUID.val(),parsePlayerUUID,errorHandler)}function parsePlayerUUID(b){getPlayerStats(b.uuid)}function errorHandler(b){b=b.responseText&&JSON.parse(b.responseText)||{cause:b};b=b.cause||b.reason;$buttonLookUpSubmit.attr("data-action-looking",!1);setInterval($alert("Error",b),1)}function getServerStats(){_fetch("GET","https://hypixel.krashnz.com/api/v3/stats",parseServerStats)}
function parseServerStats(b){$("[class='Field.Server.currentPlayers']").text(parseNumber(b.stats[0].value))}function getGameTypes(){_fetch("GET",$endpoint+"/resources/games",function(b){$gameTypes=b.games},errorHandler)}function getWatchdogStats(){_fetch("GET",$endpoint+"/watchdogstats?key="+getItem("apiKey"),parseWatchdogStats,errorHandler)}function parseWatchdogStats(b){$("[class='Field.Server.Watchdog']").text(parseNumber(b.watchdog_total))}
function getAchievements(){_fetch("GET",$endpoint+"/resources/achievements",parseAchievements,errorHandler)}
function parseAchievements(b){var d=$("[id='stats:player:achievements'] [data-role='collapsibleset']"),f;for(f in b.achievements){c=getGame(f.toUpperCase());e=b.achievements[f];$("<div/>",{"data-role":"collapsible","data-name":f,html:"<h3>"+c+"</h3><ul class='achievements'></ul>"}).appendTo(d);for(var g in e.one_time)$("<li/>",{"data-internal":f+"_"+g.toLowerCase(),"data-completed":!1,"data-name":e.one_time[g].name,"data-description":e.one_time[g].description,html:'<a data-rel="popup" href="#achievementPop"><div class=\'achievementIcon\' data-icon=\'https://hypixel.net/styles/hypixel-uix/hypixel/achievements/'+
g+".svg')></div></a>"}).appendTo($("[data-name='"+f+"'] .achievements")),$("[data-internal='"+f+"_"+g.toLowerCase()+"']").click(ent_achiv_click)}}
function parseStatistics(b){var d=$("[id='stats:player:stats'] [data-role='collapsibleset']"),f;for(f in b){c=getGame(f.toUpperCase());e=b[f];$("<div/>",{"data-role":"collapsible","data-name":f,html:"<h3>"+c+"</h3><ul class='stats'></ul>"}).appendTo(d);for(var g in Object.keys(e))$("<li/>",{"data-internal":f+"_"+g.toLowerCase(),html:"<span><b>"+convertObjectName(Object.keys(e)[g])+"</b>: "+e[Object.keys(e)[g]]+"</span>"}).appendTo($("[data-name='"+f+"'] .stats"))}}
function convertObjectName(b){var d=b.split("_");for(b=0;b<d.length;b++)d[b]=d[b].charAt(0).toUpperCase()+d[b].slice(1);return d.join(" ")}function ent_achiv_click(b){b=b.currentTarget.dataset;var d="true"==b.completed;$("#achievementPop").html("<p>"+b.name+'</p><p style="font-size: 14px">'+b.description+'</p><hr/><p class="center" style="font-size: 12px" data-text-color="'+(d?"GREEN":"GRAY")+'">'+(d?"Completed":"Not Completed")+"</p>")}
function getPlayerStats(b){_fetch("GET",$endpoint+"/player?key="+getItem("apiKey")+"&uuid="+b,function(d){null!==d.player?($data._default=d.player,getPlayerStatus(d.player.uuid)):errorHandler("Player has never played on Hypixel.")},errorHandler)}
function parsePlayerStats(b){$.mobile.changePage("#stats:player");clearField();clearAchiev();$buttonLookUpSubmit.attr("data-action-looking",!1);$lastLogin=b._default.lastLogin;$isOnline=b._recentgame.online;$currUUID=b._default.playername;var d=b._default.prefix||b._default.rank||("NONE"!==b._default.monthlyPackageRank?b._default.monthlyPackageRank:!1)||b._default.newPackageRank||"DEFAULT",f=b._default.achievementsOneTime;getItem("cache")[b._default.playername.toLowerCase()]||addCache(b._default.playername.toLowerCase(),
b._default.uuid);try{skinRender.clearScene()}catch(g){}$("[href='#stats:player:view']").on("click",function(g){try{skinRender.render($currUUID)}catch(h){g.preventDefault(),$alert("MineRender is not supported")}});$("[class='Field.Main.PlayerName']").html(buildName(b._default.displayname,d));$("[class='Field.Main.Rank']").html(buildRank(d,b._default.rankPlusColor||"GOLD"));$("[class='Field.Main.firstLogin']").text(buildTime(b._default.firstLogin));$("[class='Field.Main.lastLogin']").text(buildTime(b._default.lastLogin));
$("[class='Field.Main.networkExp']").text(parseNumber(b._default.networkExp));$("[class='Field.Main.karma']").text(parseNumber(b._default.karma||0));$("[class='Field.Main.achievementPoints']").text(parseNumber(b._default.achievementPoints));$("[class='Field.Main.UUID']").text(b._default.uuid);$("[class='Field.Main.mostRecentGameType']").text($isOnline?getGame(b._recentgame.gameType):"Not currently online");$("[class='Field.recentGame.gameType']").text($isOnline?getGame(b._recentgame.gameType):"Not currently online");
$("[class='Field.recentGame.gameMode']").text(getGameMode(b._recentgame.gameType,b._recentgame.mode));$("[class='Field.recentGame.gameMap']").text(b._recentgame.map||"Unknown");$("[class='Field.networkExp.Level").text(getNetworkLevel(b._default.networkExp));$("[class='Field.networkExp.Experience']").text(parseNumber(b._default.networkExp));$("[class='Field.networkExp.expToNextLevel']").text(parseNumber(getLevelUpExp(getNetworkLevel(b._default.networkExp))));parseStatistics(b._default.stats);try{for(b=
0;b<f.length;++b)$("[data-internal='"+f[b]+"']").attr("class","completed"),$("[data-internal='"+f[b]+"']").attr("data-completed",!0)}catch(g){}}function getPlayerStatus(b){_fetch("GET",$endpoint+"/status?key="+getItem("apiKey")+"&uuid="+b,function(d){$data._recentgame=d.session;parsePlayerStats($data)},errorHandler)}function clearField(){$("[data-role='page']:not([id='stats:server']) .ui-field > p > small").each(function(){$(this).text("")})}
function clearAchiev(){$("[data-completed='true']").attr("data-completed",!1);$("li.completed").removeAttr("class")}function _fetch(b,d,f,g){$.ajax({type:b,url:d,success:f,error:g})}function validateApiKeyRegex(b){return/[a-z0-9][a-z0-9]*-[a-z0-9][a-z0-9]*-[a-z0-9]/.test(b)}function addZero(b){10>b&&(b="0"+b);return b}function sortABC(b,d){return b.innerHTML.toLowerCase()>d.innerHTML.toLowerCase()?1:-1}function addS(b,d){return 1<d?d+" "+b+"s":d+" "+b}function nHidden(){return"Hidden"}
function AMorPM(b){return 12>b?"AM":"PM"}function parseNumber(b){try{return b.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}catch(d){return b}}
function buildRank(b,d){return b.replace("\u00a7c[OWNER]","<span data-text-color='"+getColor("OWNER")+"'>OWNER</span>").replace("ADMIN","<span data-text-color='"+getColor("OWNER")+"'>ADMIN</span>").replace("GAME_MASTER","<span data-text-color='"+getColor("GAME_MASTER")+"'>GM</span>").replace("YOU","<span data-text-color='"+getColor("YOU")+"'>You</span>").replace("TUBER","<span data-text-color='"+getColor("TUBER")+"'>Tuber</span>").replace("VIP","<span data-text-color='"+getColor("VIP")+"'>VIP</span>").replace("MVP",
"<span data-text-color='"+getColor("MVP")+"'>MVP</span>").replace("SUPERSTAR","<span data-text-color='"+getColor("SUPERSTAR")+"'>MVP</span>_PLUS_PLUS").replace("DEFAULT","<span data-text-color='"+getColor("DEFAULT")+"'>Default</span>").replace(/_PLUS/g,"<span data-text-color='"+d+"'>+</span>")}function buildName(b,d){return"<span data-text-color='"+getColor(d)+"'>"+b+"</span>"}
function buildTime(b){if(!b)return nHidden();b=new Date(b);return"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" ")[b.getDay()]+", "+"January February March April May June July August September October November December".split(" ")[b.getMonth()]+" "+b.getDate()+", "+b.getFullYear()+" at "+addZero(b.getHours())+":"+addZero(b.getMinutes())+":"+addZero(b.getSeconds())+" "+AMorPM(b.getHours())}
function buildPlayTime(b,d,f){b=d-b;b=addS("day",addZero(Math.floor(b/864E5)))+", "+addS("hour",addZero(Math.floor(b%864E5/36E5)))+", "+addS("minute",addZero(Math.floor(b%36E5/6E4)))+", "+addS("second",addZero(Math.floor(b%6E4/1E3)));f||(b=nHidden());return b}function setPlayTime(){$("[class='Field.Main.timePlaying']").text(buildPlayTime($lastLogin,(new Date).getTime(),$isOnline))}
function getColor(b){switch(!0){case /OWNER|ADMIN|YOU/.test(b):b="RED";break;case /GAME_MASTER|VIP/.test(b):b="GREEN";break;case /TUBER/.test(b):b="WHITE";break;case /SUPERSTAR/.test(b):b="GOLD";break;case /MVP/.test(b):b="AQUA";break;default:b="GRAY"}return b}function getNetworkLevel(b){return Math.round(Math.sqrt(2*b+30625)/50-2.5)}function getLevelUpExp(b){return 1>b?1E4:2500*(b-1)+1E4}
function getGameList(b){switch(b){case "BLITZ":b="Blitz Survival Games";break;case "BUILDBATTLE":b="Build Battle";break;case "COPSANDCRIMS":b="Cops and Crims";break;case "HUNGERGAMES":b="Survival Games";break;case "EASTER":b="Easter";break;case "GENERAL":b="General";break;case "MURDERMYSTERY":b="Murder Mystery";break;case "QUAKE":b="Quake";break;case "SPEEDUHC":b="Speed UHC";break;case "SUMMER":b="Summer";break;case "SUPERSMASH":b="Smash Heroes";break;case "TRUECOMBAT":b="Crazy Walls";break;case "WARLORDS":b=
"Warlords";break;case "WOOLGAMES":b="Wool Games"}return b}function getGame(b){return $gameTypes[b]&&$gameTypes[b].name||getGameList(b)}function getGameMode(b,d){return $gameTypes[b]&&$gameTypes[b].modeNames&&$gameTypes[b].modeNames[d]||d}function addCache(b,d){var f=getItem("cache");f[b]=d;localStorage.setItem("cache",JSON.stringify(f))}function isUUID(b){b=b.replace(/-/g,"");return/^[0-9a-f]{32}$/i.test(b)}$inputSettingsApiKey.on("input",function(){localStorage.setItem("apiKey",$inputSettingsApiKey.val())});
$buttonSettingsSApiKey.click(function(){validateApiKeyRegex($inputSettingsApiKey.val())&&36===$inputSettingsApiKey.val().length?_fetch("GET",$endpoint+"/key?key="+$inputSettingsApiKey.val(),apikey_suc,errorHandler):errorHandler("Invalid API key")});
$buttonSettingsClearCache.click(function(){$alert("Confirmation","Are you sure you want to clear the cache?",function(){localStorage.setItem("cache",JSON.stringify({}));$alert_close();setTimeout(function(){$alert("Done","Cache Storage has been emptied")},1E3)},1)});
$("#lookUp").submit(function(b){b.preventDefault();$buttonLookUpSubmit.attr("data-action-looking",!0);if(2>$inputLookUpUUID.val().length)return errorHandler("Field cannot be empty.");if(!/^[a-zA-Z0-9_-]*$/gm.test($inputLookUpUUID.val()))return errorHandler("Player name must only contain letters, numbers and underscores!");if(getItem("cache")[$inputLookUpUUID.val().toLowerCase()])return getPlayerStats(getItem("cache")[$inputLookUpUUID.val().toLowerCase()]);isUUID($inputLookUpUUID.val())?getPlayerStats($inputLookUpUUID.val()):
getPlayerUUID();return!1});setInterval(getServerStats,12E4);setInterval(getWatchdogStats,12E4);setInterval(setPlayTime);
